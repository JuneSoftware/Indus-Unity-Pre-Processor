name: 'Build Target Pre Processor'
description: 'To create build target matrix from selected target plaforms list'
inputs:
  buildEnvironment:
    required: false
    description: 'Build Environment'
    default: 'Development'
  slackChannel:
    required: false
    description: 'Output slack channel'
    default: 'Public'    
  buildTargetOne: 
    required: false
    description: 'Build target one'
    default: 'Android'
  buildTargetTwo: 
    required: false
    description: 'Build target two'
    default: 'None'
  buildTargetThree: 
    required: false
    description: 'Build target three'
    default: 'None'
  buildTargetFour: 
    required: false
    description: 'Build target four'
    default: 'None'
  slackData:
    required: true
    description: 'Slack channel selection data'
    default: '{"Public":"SLACK_WEBHOOK","Private":"SLACK_WEBHOOK_2"}'
  settingsFilePath:
    required: true
    description: 'Project settings file path'
    default: 'ProjectSettings/ProjectSettings.asset'
  buildNumberStepSize:
    required: true
    description: 'The fixed amount by which the build number is increased'
    default: '1'
  gcpKeyData:
    required: true
    description: 'GCP Keys list for build storage'
    default: '{"Development":{"GCPKey":"SERVICE_ACCOUNT_KEY_DEV","GCPURL":"GCP_BUILD_URL_PREFIX_DEV"},"Staging":{"GCPKey":"GCP_BUILD_URL_PREFIX_STAGING","GCPURL":"SERVICE_ACCOUNT_KEY_STAGING"},"Release":{"GCPKey":"GCP_BUILD_URL_PREFIX_STAGING","GCPURL":"SERVICE_ACCOUNT_KEY_STAGING"},"Production":{"GCPKey":"GCP_BUILD_URL_PREFIX_STAGING","GCPURL":"SERVICE_ACCOUNT_KEY_STAGING"}}'

outputs:
  selectedTarget:
    description: Generated matrix
  buildNumber:
    description: Build Number
  buildVersion:
    description: Build Version String
    
runs:
  using: 'node12'
  main: 'dist/index.js'
